<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="theme-color" content="#034ea1">
    <meta name="msapplication-TileColor" content="#034ea1">
    <script>
    window.frctl = {
        env: 'static'
    };
    </script>
    <script>var cl = document.querySelector('html').classList; cl.remove('no-js'); cl.add('has-js');</script>
    <link rel="apple-touch-icon" sizes="144x144" href="../../themes/ecl-fractal-theme/img/favicon/apple-touch-icon-144x144.png">
<meta name="msapplication-square70x70logo" content="../../themes/ecl-fractal-theme/img/favicon/mstile-70x70.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../themes/ecl-fractal-theme/img/favicon/apple-touch-icon-120x120.png">
<meta name="msapplication-square150x150logo" content="../../themes/ecl-fractal-theme/img/favicon/mstile-150x150.png">
<link rel="apple-touch-icon" sizes="57x57" href="../../themes/ecl-fractal-theme/img/favicon/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../themes/ecl-fractal-theme/img/favicon/apple-touch-icon-152x152.png">
<meta name="msapplication-square310x310logo" content="../../themes/ecl-fractal-theme/img/favicon/mstile-310x310.png">
<meta name="msapplication-wide310x150logo" content="../../themes/ecl-fractal-theme/img/favicon/mstile-310x150.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../themes/ecl-fractal-theme/img/favicon/apple-touch-icon-114x114.png">
<meta name="msapplication-TileImage" content="../../themes/ecl-fractal-theme/img/favicon/mstile-144x144.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../themes/ecl-fractal-theme/img/favicon/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../themes/ecl-fractal-theme/img/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="../../themes/ecl-fractal-theme/img/favicon/android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../themes/ecl-fractal-theme/img/favicon/apple-touch-icon-60x60.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../themes/ecl-fractal-theme/img/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../themes/ecl-fractal-theme/img/favicon/favicon-96x96.png">
<link rel="shortcut icon" href="../../themes/ecl-fractal-theme/favicon.ico" type="image/ico">

<link rel="stylesheet" href="../../themes/ecl-fractal-theme/css/fractal.css?cachebust=0.13.2" type="text/css">


<title>Visual regression testing | Europa Component Library</title>

</head>
<body class="language-en">
  <div class="ecl-skip-link__wrapper" id="skip-link">
  <a href="#main-content" class="ecl-skip-link">Skip to main content</a>
</div>

<header class="ecl-site-header" role="banner">
  <div class="ecl-site-switcher ecl-site-switcher--header">
    <ul class="ecl-site-switcher__list ecl-container">
        <li class="ecl-site-switcher__option"><a class="ecl-link ecl-site-switcher__link" href="#">Commission and its priorities</a></li>
        <li class="ecl-site-switcher__option ecl-site-switcher__option--is-selected"><a class="ecl-link ecl-site-switcher__link" href="#">Policies, information and services</a></li>
    </ul>
  </div>
  <div class="ecl-container ecl-site-header__banner">
    <a href="https://ec.europa.eu" class="ecl-logo ecl-logo--logotype ecl-site-header__logo" title="Home - European Commission">
      <span class="ecl-u-sr-only">Home - European Commission</span>
    </a>
    <div class="ecl-lang-select-sites ecl-site-header__lang-select-sites">
      <a href="#" class="ecl-lang-select-sites__link">
        <span class="ecl-lang-select-sites__label">English</span>
        <span class="ecl-lang-select-sites__code">
          <span class="ecl-icon ecl-icon--language ecl-lang-select-sites__icon"></span>
          <span class="ecl-lang-select-sites__code-text">en</span>
        </span>
      </a>
    </div>
    <form class="ecl-search-form ecl-site-header__search">
      <label class="ecl-search-form__textfield-wrapper">
        <span class="ecl-u-sr-only">Search this website</span>
        <input type="search" class="ecl-text-input ecl-search-form__textfield" id="search-components" name="search-components" />
        <script id="searchIndexPath" type="application/json">{ "path": "../../assets/searchIndex.json" }</script>
      </label>
      <button class="ecl-button ecl-button--form ecl-search-form__button" type="submit">Search</button>
    </form>
  </div>
</header>
<div class="ecl-page-header">
  <div class="ecl-container">
    <nav class="ecl-breadcrumbs " aria-label="breadcrumbs">
      <span class="ecl-u-sr-only">You are here:</span>
      <ol class="ecl-breadcrumbs__segments-wrapper">
        <li class="ecl-breadcrumbs__segment ecl-breadcrumbs__segment--first">
          <a href="http://europa.eu/index_en.htm" class="ecl-link ecl-link--inverted ecl-link--standalone ecl-breadcrumbs__link">European Commission</a>
        </li>
        <li class="ecl-breadcrumbs__segment ecl-breadcrumbs__segment--last">
          <a href="/" class="ecl-link ecl-link--inverted ecl-link--standalone ecl-breadcrumbs__link">Europa Component Library</a>
        </li>
        <li class="ecl-breadcrumbs__segment ecl-breadcrumbs__segment--last">
          <a href="#" class="ecl-link ecl-link--inverted ecl-link--standalone ecl-breadcrumbs__link"> Europa Component Library</a>
        </li>
      </ol>
    </nav>
    <div class="ecl-page-header__body">
      <div class="ecl-page-header__identity">
        Europa Component Library
      </div>
    </div>
  </div>
</div>

  <main>
    <a id="main-content" tabindex="-1"></a>
    
  
<nav class="ecl-navigation-menu" aria-label="Main Navigation">
  <div class="ecl-container">
    <button class="ecl-navigation-menu__toggle ecl-navigation-menu__hamburger ecl-navigation-menu__hamburger--squeeze" aria-controls="nav-menu-expandable-root" aria-expanded="false">
      <span class="ecl-navigation-menu__hamburger-box">
        <span class="ecl-navigation-menu__hamburger-inner"></span>
      </span>
      <span class="ecl-navigation-menu__hamburger-label">Menu</span>
    </button>
    <ul class="ecl-navigation-menu__root" id="nav-menu-expandable-root" aria-hidden="true">
      
<li class="ecl-navigation-menu__item">
  <a href="#item2" class="ecl-navigation-menu__link" aria-controls="nav-menu-expandable-group-3" aria-expanded="false" aria-haspopup="true">documentation</a>
  <ul class="ecl-navigation-menu__group" id="nav-menu-expandable-group-3" aria-hidden="true">
    
    
        
        
        <li class="ecl-navigation-menu__item"  data-role="item">
          <a href="../overview" class="ecl-navigation-menu__link ">
            
            <span>Components</span>
          </a>
        </li>
        
    
        
        
        <li class="ecl-navigation-menu__item"  data-role="item">
          <a href="../atomic" class="ecl-navigation-menu__link ">
            
            <span>Atomic design patterns</span>
          </a>
        </li>
        
    
        
        
        <li class="ecl-navigation-menu__item"  data-role="item">
          <a href="../javascript" class="ecl-navigation-menu__link ">
            
            <span>JavaScript</span>
          </a>
        </li>
        
    
        
        
        <li class="ecl-navigation-menu__item"  data-role="item">
          <a href="../documentation" class="ecl-navigation-menu__link ">
            
            <span>Edit documentation</span>
          </a>
        </li>
        
    
        
        <li class="ecl-navigation-menu__item">
          <h4 class="ecl-heading ecl-heading--h4 ecl-navigation-menu__heading">Conventions</h4>
          <ul class="ecl-list ecl-list--unstyled ecl-navigation-menu__item-list" data-role="items">
            
            
            
            
    
        
        
        <li class="ecl-navigation-menu__item"  data-role="item">
          <a href="../conventions/git" class="ecl-navigation-menu__link ">
            
            <span>Git Commit</span>
          </a>
        </li>
        
    
        
        
        <li class="ecl-navigation-menu__item"  data-role="item">
          <a href="../conventions/javascript" class="ecl-navigation-menu__link ">
            
            <span>JavaScript</span>
          </a>
        </li>
        
    
        
        
        <li class="ecl-navigation-menu__item"  data-role="item">
          <a href="../conventions/markdown" class="ecl-navigation-menu__link ">
            
            <span>Markdown</span>
          </a>
        </li>
        
    
        
        
        <li class="ecl-navigation-menu__item"  data-role="item">
          <a href="../conventions/scss" class="ecl-navigation-menu__link ">
            
            <span>SCSS</span>
          </a>
        </li>
        
    

          </ul>
        </li>
        
    
        
        <li class="ecl-navigation-menu__item">
          <h4 class="ecl-heading ecl-heading--h4 ecl-navigation-menu__heading">Testing</h4>
          <ul class="ecl-list ecl-list--unstyled ecl-navigation-menu__item-list" data-role="items">
            
            
            
            
    
        
        
        <li class="ecl-navigation-menu__item"  data-state="current" data-role="item">
          <a href="" class="ecl-navigation-menu__link  ecl-navigation-menu__link--active">
            
            <span>Visual regression</span>
          </a>
        </li>
        
    

          </ul>
        </li>
        
    

  </ul>
</li>

    </ul>
  </div>
</nav>


  <div class="ecl-container">
    <div class="ecl-row">
      <div class="ecl-col ecl-u-mb-s">
        
<div class="ecl-u-mv-m">
  <div class="ecl-u-mb-s">
  
    <h1 class="ecl-heading ecl-heading--h1">Visual regression testing</h1>
    


    
  </div>
  

<div class="ecl-editor">



    
    
    <p>We test our components in order to catch visual regressions before they hit the production. We use <a href="http://webdriver.io/">WebdriverIO</a> to drive those tests on <a href="https://saucelabs.com/">Sauce Labs</a>‘s Selenium cloud-based solution:</p>
<p>Here are the results of the latest build:</p>
<p><a href="https://saucelabs.com/u/europa-component-library"><img src="https://saucelabs.com/browser-matrix/europa-component-library.svg" alt="Build Status"></a></p>
<h2 id="how-to-test-a-new-component">How to test a new component</h2>
<p>Testing a new component is quite simple. Follow the guide!</p>
<h3 id="write-a-test">Write a test</h3>
<p>Tests are located under <code>test/functional</code>. Create a new <code>my-component.js</code> file here and paste:</p>
<code class="lang-js"><pre>describe(<span class="hljs-string">'my-component'</span>, () =&gt; {
  before(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-comment">// Set viewport size</span>
    browser.setViewportSize({
      <span class="hljs-attr">width</span>: <span class="hljs-number">1400</span>,
      <span class="hljs-attr">height</span>: <span class="hljs-number">600</span>,
    });

    browser.pause(<span class="hljs-number">1000</span>);

    <span class="hljs-comment">// Go to url</span>
    browser.url(<span class="hljs-string">'my-component.html'</span>);

    <span class="hljs-comment">// Make sure the browser has finished painting</span>
    browser.pause(<span class="hljs-number">1000</span>);
  });

  <span class="hljs-comment">// Normal state</span>
  context(<span class="hljs-string">'with plain state'</span>, () =&gt; {
    it(<span class="hljs-string">'should match the reference screenshot'</span>, () =&gt; {
      <span class="hljs-keyword">const</span> screenshots = browser.checkDocument({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'my-component'</span>,
      });
      expect(screenshots).to.matchReference();
    });
  });
});</pre></code><p>Of course, replace <code>my-component</code> by the name of the actual component and make sure the URL you provide exists.</p>
<p><strong>Under the hood, the URL will be prefixed by <code>http://localhost:3000/components/preview/</code></strong>.</p>
<h3 id="get-the-reference-screenshots">Get the reference screenshots</h3>
<p>In order to get the reference screenshots, you have to run the tests locally. On the first run, if the reference screenshots don’t exist, they will be created. You need to create a Sauce Labs account and then create a new token.</p>
<h4 id="configure-sauce-labs">Configure Sauce Labs</h4>
<p>In your <code>.env</code> file, provide the information about your own Sauce Labs account.</p>
<code class="lang-shell"><pre>SAUCE_USERNAME=username
SAUCE_ACCESS_KEY=my-sauce-labs-access-key</pre></code><p>Then, build the style guide with <code>yarn dist</code> and run: <code>yarn test:functional</code>.</p>
<p>Tip: it can take a while to run all the tests, but you can also target your test only:</p>
<code class="lang-shell"><pre>yarn test:functional -- --spec ./framework/components/my-component/test/spec/my-component.js</pre></code><p>If everything went well, you should now have a new folder <code>./framework/components/my-component/test/screenshots/reference/my-component</code> containing the reference screenshots. Add them to your Pull Request.</p>
<p>That’s it!</p>

    


</div>


</div>

      </div>
    </div>
  </div>

  </main>
  <footer class="ecl-footer">
  <div class="ecl-footer__site-identity">
    <div class="ecl-container">
      <div class="ecl-row">
        <div class="ecl-col-sm ecl-footer__column">
          <h4 class="ecl-h4">
            <a class="ecl-link ecl-link--standalone ecl-footer__link" href="#">Europa Component Library</a>
          </h4>
        </div>
        <div class="ecl-col-sm ecl-footer__column">
          <p class="ecl-footer__label">Follow us:</p>
          <ul class="ecl-footer__menu ecl-list--inline ecl-footer__social-links">
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-footer__link ecl-link--external" href="https://github.com/ec-europa/europa-component-library">GitHub</a>
            </li>
          </ul>
        </div>
        <div class="ecl-col-sm ecl-footer__column">
          <ul class="ecl-footer__menu ecl-list--unstyled">
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-footer__link" href="/flavors/ec">EC Components</a>
            </li>
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-footer__link" href="/flavors/eu">EU Components</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="ecl-footer__site-corporate">
    <div class="ecl-container">
      <div class="ecl-row">
        <div class="ecl-col-sm ecl-footer__column">
          <h4 class="ecl-h4 ecl-footer__title">European Commission</h4>
          <ul class="ecl-footer__menu">
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-footer__link" href="https://ec.europa.eu/commission/index_en">Commission and its priorities</a>
            </li>
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-footer__link" href="https://ec.europa.eu/info/index_en">Policies information and services</a>
            </li>
          </ul>
        </div>
        <div class="ecl-col-sm ecl-footer__column">
          <h4 class="ecl-h4 ecl-footer__title">Follow the European Commission</h4>
          <ul class="ecl-footer__menu ecl-list--inline ecl-footer__social-links">
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-footer__link" href="#"><span class="ecl-icon ecl-icon--facebook ecl-footer__social-icon"></span>Facebook</a>
            </li>
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-footer__link" href="#"><span class="ecl-icon ecl-icon--twitter ecl-footer__social-icon"></span>Twitter</a>
            </li>
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-link--external ecl-footer__link" href="#">Other social media</a>
            </li>
          </ul>
        </div>
        <div class="ecl-col-sm ecl-footer__column">
          <h4 class="ecl-h4 ecl-footer__title">European Union</h4>
          <ul class="ecl-footer__menu">
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-link--external ecl-footer__link" href="#">EU institutions</a>
            </li>
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-link--external ecl-footer__link" href="#">European Union</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="ecl-footer__ec">
    <div class="ecl-container">
      <div class="ecl-row">
        <div class="ecl-col-sm ">
          <ul class="ecl-list--inline ecl-footer__menu">
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-footer__link" href="http://ec.europa.eu/info/about-commissions-new-web-presence_en">About the Commission's new web presence</a>
            </li>
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-footer__link" href="http://ec.europa.eu/info/resources-partners_en">Resources for partners</a>
            </li>
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-footer__link" href="http://ec.europa.eu/info/cookies_en">Cookies</a>
            </li>
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-footer__link" href="http://ec.europa.eu/info/legal-notice_en">Legal notice</a>
            </li>
            <li class="ecl-footer__menu-item">
              <a class="ecl-link ecl-link--inverted ecl-footer__link" href="http://ec.europa.eu/info/contact_en">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="../../themes/ecl-fractal-theme/js/jquery.min.js?cachebust=0.13.2"></script>

<script src="../../themes/ecl-fractal-theme/js/jquery-resizable.min.js?cachebust=0.13.2"></script>

<script src="../../themes/ecl-fractal-theme/js/select2.min.js?cachebust=0.13.2"></script>

<script src="../../themes/ecl-fractal-theme/js/ecl-fractal-theme.js?cachebust=0.13.2"></script>



</body>
</html>
